version: '2'
services:
    librecat:
        build:
            context: .
            dockerfile: Dockerfile_Dev
        image: librecat:latest
        ports:
            - "5001:5001"
        links:
            - "mysql:mysqldb"
            - "elasticsearch:searchnode"
        env_file:
            - ./conf/mysql.env
        volumes:
            - "~/librecat-logs:/srv/LibreCat/logs"
        depends_on:
            - mysql
            - elasticsearch
        restart: always
    mysql:
        build: mysql
        image: mysql:5.5
        ports:
            - "3306:3306"
        env_file:
            - ./conf/mysql.env
        volumes:
            - "~/librecat-mysql:/var/lib/mysql"
        restart: always
    elasticsearch:
        build: elasticsearch
        image: elasticsearch:1.7
        ports:
            - "9300:9300"
            - "9200:9200"
        volumes:
            - "~/librecat-index:/usr/share/elasticsearch/data"
        restart: always
